{"site":{"title":"","description":null,"enableMobile":true,"faviconPath":null,"thumbnailSocialPath":null,"descriptionSocial":null,"titleSocial":null,"lang":"","width":1200,"headUser":"<!DOCTYPE html>\n<html>\n  <head>\n    <title>Image to Scheme</title>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n    <style>\n      body{max-width:1000px;margin:20px auto;padding:0 20px;font-family:sans-serif;}input,button,select,textarea{font:inherit;}a {text-decoration:none;}a:hover{text-decoration:underline;}\n      textarea {\n        width: 100%;\n      }\n      code {\n        white-space: pre;\n        letter-spacing: 0;\n        line-height: 1ch;\n        display: block;\n      }\n      label {\n        font-weight: bold;\n        padding-right: 10px;\n      }\n    </style>\n  </head>\n  <body>\n    <h1>Image to Scheme</h1>\n    <p><label>image:</label><input type=\"file\" id=\"input\" accept=\"image/*\"><label>resolution (pixel square size to group):</label><input type=\"number\" id=\"resolution\" value='3'/></p>\n    <code id=\"output\"></code>\n    <script src=\"../sheep.js\"></script>\n    <script>\n      function getPixelXY(imgData,x,y) {\n        // https://stackoverflow.com/questions/667045/getpixel-from-html-canvas\n        var i=(y*imgData.width+x)*4,d=imgData.data;\n        return [d[i],d[i+1],d[i+2],d[i+3]];\n      }\n      function darkness(r,g,b) {\n        return Math.round(((parseInt(r)*299)+(parseInt(g)*587)+(parseInt(b)*114))/1000);\n      }\n      function avg(arr) {\n        return arr.reduce((a,b)=>a+b)/arr.length;\n      }\n      var input=document.querySelector('#input'),\n      resinput=document.querySelector('#resolution'),\n      output=document.querySelector('#output'),\n      canvas=document.createElement('canvas'),\n      c=canvas.getContext('2d'),\n      RESOLUTION;\n      input.onchange=e=>{\n        RESOLUTION=+resinput.value;\n        var image=new Image(),\n        t=window.URL.createObjectURL(input.files[0]);\n        image.onload=e=>{\n          canvas.width=image.width,\n          canvas.height=image.height;\n          c.drawImage(image,0,0,image.width,image.height);\n          window.URL.revokeObjectURL(t);\n          var data=c.getImageData(0,0,canvas.width,canvas.height),\n          newpixels=[];\n          for (var y=0;y<canvas.height;y+=RESOLUTION) {\n            var pixelrow=[];\n            for (var x=0;x<canvas.width;x+=RESOLUTION) {\n              var darknesses=[];\n              for (var i=0,l=RESOLUTION*RESOLUTION;i<l;i++) {\n                var t=getPixelXY(data,x+i%RESOLUTION,y+Math.floor(i/RESOLUTION));\n                if (t[0]!==undefined) darknesses.push(darkness(...t));\n              }\n              pixelrow.push(Math.round(avg(darknesses)));\n            }\n            newpixels.push(pixelrow);\n          }\n          output.innerHTML=newpixels.map(a=>a.map(a=>{\n            if (a<25) return '@';\n            else if (a<50) return '%';\n            else if (a<75) return '#';\n            else if (a<100) return '*';\n            else if (a<125) return '+';\n            else if (a<150) return '=';\n            else if (a<175) return '-';\n            else if (a<200) return ':';\n            else if (a<225) return '.';\n            else return ' ';\n          }).join('')).join('\\n');\n        };\n        image.src=t;\n      };\n    </script>\n  </body>\n  <!-- MADE BY SEAN -->\n</html>","headStyle":"","headScript":"","hostingProvider":"ghpages","twitterSocial":null,"dataSources":{},"fonts":[{"family":"'Roboto', sans-serif","href":"https://fonts.googleapis.com/css?family=Roboto"}],"styles":{"all-style":{"className":"all-style","templateName":"text","displayName":"All style","styles":{"desktop":{"normal":{"className":"all-style","pseudoClass":"normal","All":{"font-family":"'Roboto', sans-serif"}}}}}},"isTemplate":false,"file":{"name":"index.html","folder":"imagetoscheme/main","path":"imagetoscheme/main/index.html","service":"github","url":"https://editor.silex.me/ce/github/get/imagetoscheme/main/index.html","absPath":"/ce/github/get/imagetoscheme/main/index.html"},"prodotypeDependencies":{},"data":{},"publicationPath":{"name":"gh-pages","folder":"imagetoscheme","path":"imagetoscheme/gh-pages","service":"github","url":"https://MikaHacks.github.io/imagetoscheme/"}},"pages":[{"id":"page-page-1","displayName":"Page 1","link":{"linkType":"LinkTypePage","href":"#!page-page-1"},"canDelete":true,"canProperties":true,"canMove":true,"canRename":true,"opened":false}],"elements":[{"id":"body-initial","pageNames":[],"classList":[],"type":"container-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1478366444112-1","silex-id-1474394621033-3","silex-id-1478366450713-3"],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"rgba(255,255,255,1)","position":"static"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"BODY"},{"id":"silex-id-1478366444112-1","pageNames":[],"classList":[],"type":"section-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1478366444112-0"],"link":null,"enableEdit":false,"enableDrag":true,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","position":"static","margin-top":"-1px"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"SECTION"},{"id":"silex-id-1478366444112-0","pageNames":[],"classList":["website-width"],"type":"container-element","isSectionContent":true,"title":"","alt":null,"children":[],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","height":"100px","position":"relative","margin-left":"auto","margin-right":"auto"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"DIV"},{"id":"silex-id-1474394621033-3","pageNames":[],"classList":[],"type":"section-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1474394621032-2"],"link":null,"enableEdit":false,"enableDrag":true,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"position":"static","margin-top":"-1px"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"SECTION"},{"id":"silex-id-1474394621032-2","pageNames":[],"classList":["website-width"],"type":"container-element","isSectionContent":true,"title":"","alt":null,"children":["silex-id-1647535618967-0"],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","height":"600px","position":"relative","margin-left":"auto","margin-right":"auto"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"DIV"},{"id":"silex-id-1478366450713-3","pageNames":[],"classList":[],"type":"section-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1478366450713-2"],"link":null,"enableEdit":false,"enableDrag":true,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","position":"static","margin-top":"-1px"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"SECTION"},{"id":"silex-id-1478366450713-2","pageNames":[],"classList":["website-width"],"type":"container-element","isSectionContent":true,"title":"","alt":null,"children":["silex-id-1442914737143-3"],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","height":"100px","position":"relative","margin-left":"auto","margin-right":"auto"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"DIV"},{"id":"silex-id-1442914737143-3","pageNames":[],"classList":[],"type":"text-element","isSectionContent":false,"title":"","alt":null,"children":[],"link":null,"enableEdit":true,"enableDrag":true,"enableDrop":false,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"width":"241px","top":"26px","left":"494px","height":"51px","position":"absolute"},"mobile":{}},"data":{"component":null},"innerHtml":"<p>Powered by <a href=\"https://www.silex.me/\" target=\"_blank\" title=\"Silex website builder,  free and open source\" linktype=\"LinkTypeExternal\">Silex website builder</a></p>","tagName":"DIV"},{"id":"silex-id-1647535618967-0","tagName":"DIV","type":"html-element","alt":null,"title":null,"isSectionContent":false,"visibility":{"desktop":true,"mobile":true},"style":{"mobile":{},"desktop":{"width":"1032.9784851074219px","height":"521.6741027832031px","background-color":"rgb(255, 255, 255)","position":"absolute","top":"-1px","left":"-1px"}},"data":{"component":null},"children":[],"pageNames":["page-page-1"],"classList":[],"attr":{},"link":null,"enableEdit":true,"enableDrag":true,"enableDrop":false,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"innerHtml":"\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Image to Scheme</title>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n    <style>\n      body{max-width:1000px;margin:20px auto;padding:0 20px;font-family:sans-serif;}input,button,select,textarea{font:inherit;}a {text-decoration:none;}a:hover{text-decoration:underline;}\n      textarea {\n        width: 100%;\n      }\n      code {\n        white-space: pre;\n        letter-spacing: 0;\n        line-height: 1ch;\n        display: block;\n      }\n      label {\n        font-weight: bold;\n        padding-right: 10px;\n      }\n    </style>\n  </head>\n  <body>\n    <h1>Image to Scheme</h1>\n    <p><label>image:</label><input type=\"file\" id=\"input\" accept=\"image/*\"><label>resolution (pixel square size to group):</label><input type=\"number\" id=\"resolution\" value='3'/></p>\n    <code id=\"output\"></code>\n    <script src=\"../sheep.js\"></script>\n    <script>\n      function getPixelXY(imgData,x,y) {\n        // https://stackoverflow.com/questions/667045/getpixel-from-html-canvas\n        var i=(y*imgData.width+x)*4,d=imgData.data;\n        return [d[i],d[i+1],d[i+2],d[i+3]];\n      }\n      function darkness(r,g,b) {\n        return Math.round(((parseInt(r)*299)+(parseInt(g)*587)+(parseInt(b)*114))/1000);\n      }\n      function avg(arr) {\n        return arr.reduce((a,b)=>a+b)/arr.length;\n      }\n      var input=document.querySelector('#input'),\n      resinput=document.querySelector('#resolution'),\n      output=document.querySelector('#output'),\n      canvas=document.createElement('canvas'),\n      c=canvas.getContext('2d'),\n      RESOLUTION;\n      input.onchange=e=>{\n        RESOLUTION=+resinput.value;\n        var image=new Image(),\n        t=window.URL.createObjectURL(input.files[0]);\n        image.onload=e=>{\n          canvas.width=image.width,\n          canvas.height=image.height;\n          c.drawImage(image,0,0,image.width,image.height);\n          window.URL.revokeObjectURL(t);\n          var data=c.getImageData(0,0,canvas.width,canvas.height),\n          newpixels=[];\n          for (var y=0;y<canvas.height;y+=RESOLUTION) {\n            var pixelrow=[];\n            for (var x=0;x<canvas.width;x+=RESOLUTION) {\n              var darknesses=[];\n              for (var i=0,l=RESOLUTION*RESOLUTION;i<l;i++) {\n                var t=getPixelXY(data,x+i%RESOLUTION,y+Math.floor(i/RESOLUTION));\n                if (t[0]!==undefined) darknesses.push(darkness(...t));\n              }\n              pixelrow.push(Math.round(avg(darknesses)));\n            }\n            newpixels.push(pixelrow);\n          }\n          output.innerHTML=newpixels.map(a=>a.map(a=>{\n            if (a<25) return '@';\n            else if (a<50) return '%';\n            else if (a<75) return '#';\n            else if (a<100) return '*';\n            else if (a<125) return '+';\n            else if (a<150) return '=';\n            else if (a<175) return '-';\n            else if (a<200) return ':';\n            else if (a<225) return '.';\n            else return ' ';\n          }).join('')).join('\\n');\n        };\n        image.src=t;\n      };\n    </script>\n  </body>\n  <!-- MADE BY SEAN -->\n</html>"}]}