<!doctype html><html class="" lang=""><head>
    <meta charset="UTF-8">
    <!-- generator meta tag -->
    <!-- leave this for stats and Silex version check -->
    <meta name="generator" content="Silex v2.2.13">
    <!-- End of generator meta tag -->
    <script type="text/javascript" src="js/jquery.js"></script>
    
    
    <script type="text/javascript" src="js/front-end.js"></script>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/front-end.css">

    
    <script type="text/javascript" class="silex-script"></script>
    
    <title> - Page 1</title>
    

    
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" class="silex-custom-font"><meta name="viewport" content="width=device-width, initial-scale=1"><script src="js/script.js" type="text/javascript"></script><link href="css/styles.css" rel="stylesheet" type="text/css">

  
    <title>Image to Scheme</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body{max-width:1000px;margin:20px auto;padding:0 20px;font-family:sans-serif;}input,button,select,textarea{font:inherit;}a {text-decoration:none;}a:hover{text-decoration:underline;}
      textarea {
        width: 100%;
      }
      code {
        white-space: pre;
        letter-spacing: 0;
        line-height: 1ch;
        display: block;
      }
      label {
        font-weight: bold;
        padding-right: 10px;
      }
    </style>
  
  
    <h1>Image to Scheme</h1>
    <p><label>image:</label><input type="file" id="input" accept="image/*"><label>resolution (pixel square size to group):</label><input type="number" id="resolution" value="3"></p>
    <code id="output"></code>
    <script src="../sheep.js"></script>
    <script>
      function getPixelXY(imgData,x,y) {
        // https://stackoverflow.com/questions/667045/getpixel-from-html-canvas
        var i=(y*imgData.width+x)*4,d=imgData.data;
        return [d[i],d[i+1],d[i+2],d[i+3]];
      }
      function darkness(r,g,b) {
        return Math.round(((parseInt(r)*299)+(parseInt(g)*587)+(parseInt(b)*114))/1000);
      }
      function avg(arr) {
        return arr.reduce((a,b)=>a+b)/arr.length;
      }
      var input=document.querySelector('#input'),
      resinput=document.querySelector('#resolution'),
      output=document.querySelector('#output'),
      canvas=document.createElement('canvas'),
      c=canvas.getContext('2d'),
      RESOLUTION;
      input.onchange=e=>{
        RESOLUTION=+resinput.value;
        var image=new Image(),
        t=window.URL.createObjectURL(input.files[0]);
        image.onload=e=>{
          canvas.width=image.width,
          canvas.height=image.height;
          c.drawImage(image,0,0,image.width,image.height);
          window.URL.revokeObjectURL(t);
          var data=c.getImageData(0,0,canvas.width,canvas.height),
          newpixels=[];
          for (var y=0;y<canvas.height;y+=RESOLUTION) {
            var pixelrow=[];
            for (var x=0;x<canvas.width;x+=RESOLUTION) {
              var darknesses=[];
              for (var i=0,l=RESOLUTION*RESOLUTION;i<l;i++) {
                var t=getPixelXY(data,x+i%RESOLUTION,y+Math.floor(i/RESOLUTION));
                if (t[0]!==undefined) darknesses.push(darkness(...t));
              }
              pixelrow.push(Math.round(avg(darknesses)));
            }
            newpixels.push(pixelrow);
          }
          output.innerHTML=newpixels.map(a=>a.map(a=>{
            if (a<25) return '@';
            else if (a<50) return '%';
            else if (a<75) return '#';
            else if (a<100) return '*';
            else if (a<125) return '+';
            else if (a<150) return '=';
            else if (a<175) return '-';
            else if (a<200) return ':';
            else if (a<225) return '.';
            else return ' ';
          }).join('')).join('\n');
        };
        image.src=t;
      };
    </script>
  
  <!-- MADE BY SEAN -->
<style>body { opacity: 0; transition: .25s opacity ease; }</style></head>

<body class="body-initial all-style enable-mobile prevent-resizable prevent-selectable editable-style silex-runtime silex-published" data-silex-type="container-element" style="" data-current-page="page-page-1">
    









    <section data-silex-type="container-element" class="container-element editable-style silex-id-1478366444112-1 section-element prevent-resizable" style="">
        <div data-silex-type="container-element" class="editable-style silex-element-content silex-id-1478366444112-0 container-element website-width"></div>
    </section>
    <section data-silex-type="container-element" class="container-element editable-style silex-id-1474394621033-3 section-element prevent-resizable" style="">
        <div data-silex-type="container-element" class="editable-style silex-element-content silex-id-1474394621032-2 container-element website-width selected"><div data-silex-type="html-element" class="editable-style html-element silex-id-1647535618967-0 page-page-1 paged-element paged-element-visible" style=""><div class="silex-element-content">


  
    <title>Image to Scheme</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>body {max-width: 1000px; margin: 20px auto; padding: 0 20px; font-family: sans-serif;}input,button,select,textarea {font: inherit;}a {text-decoration: none;}a:hover {text-decoration: underline;}textarea {width: 100%;}code {white-space: pre; letter-spacing: 0; line-height: 1ch; display: block;}label {font-weight: bold; padding-right: 10px;}</style>
  
  
    <h1>Image to Scheme</h1>
    <p><label>image:</label><input type="file" id="input" accept="image/*"><label>resolution (pixel square size to group):</label><input type="number" id="resolution" value="3"></p>
    <code id="output"></code>
    <script src="js/sheep.js"></script>
    <script>
      function getPixelXY(imgData,x,y) {
        // https://stackoverflow.com/questions/667045/getpixel-from-html-canvas
        var i=(y*imgData.width+x)*4,d=imgData.data;
        return [d[i],d[i+1],d[i+2],d[i+3]];
      }
      function darkness(r,g,b) {
        return Math.round(((parseInt(r)*299)+(parseInt(g)*587)+(parseInt(b)*114))/1000);
      }
      function avg(arr) {
        return arr.reduce((a,b)=>a+b)/arr.length;
      }
      var input=document.querySelector('#input'),
      resinput=document.querySelector('#resolution'),
      output=document.querySelector('#output'),
      canvas=document.createElement('canvas'),
      c=canvas.getContext('2d'),
      RESOLUTION;
      input.onchange=e=>{
        RESOLUTION=+resinput.value;
        var image=new Image(),
        t=window.URL.createObjectURL(input.files[0]);
        image.onload=e=>{
          canvas.width=image.width,
          canvas.height=image.height;
          c.drawImage(image,0,0,image.width,image.height);
          window.URL.revokeObjectURL(t);
          var data=c.getImageData(0,0,canvas.width,canvas.height),
          newpixels=[];
          for (var y=0;y<canvas.height;y+=RESOLUTION) {
            var pixelrow=[];
            for (var x=0;x<canvas.width;x+=RESOLUTION) {
              var darknesses=[];
              for (var i=0,l=RESOLUTION*RESOLUTION;i<l;i++) {
                var t=getPixelXY(data,x+i%RESOLUTION,y+Math.floor(i/RESOLUTION));
                if (t[0]!==undefined) darknesses.push(darkness(...t));
              }
              pixelrow.push(Math.round(avg(darknesses)));
            }
            newpixels.push(pixelrow);
          }
          output.innerHTML=newpixels.map(a=>a.map(a=>{
            if (a<25) return '@';
            else if (a<50) return '%';
            else if (a<75) return '#';
            else if (a<100) return '*';
            else if (a<125) return '+';
            else if (a<150) return '=';
            else if (a<175) return '-';
            else if (a<200) return ':';
            else if (a<225) return '.';
            else return ' ';
          }).join('')).join('\n');
        };
        image.src=t;
      };
    </script>
  
  <!-- MADE BY SEAN -->
</div></div></div>
    </section>
    <section data-silex-type="container-element" class="container-element editable-style silex-id-1478366450713-3 section-element prevent-resizable" style="">
        <div data-silex-type="container-element" class="editable-style silex-element-content silex-id-1478366450713-2 container-element website-width">

            <div class="editable-style silex-id-1442914737143-3 text-element" data-silex-type="text-element" style="">
                <div class="silex-element-content normal"><p>Powered by <a href="https://www.silex.me/" target="_blank" title="Silex website builder,  free and open source" linktype="LinkTypeExternal">Silex website builder</a></p></div>
            </div>
        </div>
    </section>
















</body></html>